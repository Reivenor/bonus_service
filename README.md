Разработать сервис накопления скидочных баллов клиентов.
Сущность Клиент, атрибуты: номер карты (20 цифр), количество доступных баллов.
Сущность Чек, атрибуты: ИД чека, номер карты, сумма чека.
Сущность Позиция чека, атрибуты: ИД чека, сумма позиции.
Отношение Клиент-Чек – один ко многим.
Отношение Чек-Позиция – один ко многим.
Правила начисления баллов
- сумма всех чеков клиента <= 50 000р – 1 бал за каждые 50р
- сумма всех чеков клиента > 50 000р и <= 100 000р – 1 бал за каждые 40р
- сумма всех чеков клиента > 100 000р – 1 балл за каждые 30р
Пример
- сумма покупок = 20 000 – всего было начислено 400 баллов
- сумма покупок = 60 000 – всего было начислено 1500 баллов
- сумма покупок = 120 000 – всего было начислено 4000 баллов
Правила снятия баллов
- конвертацию в деньги по курсу снятия 1 балл = 10р
Необходимо разработать Rest API, которое позволит
- корректировать количество баллов (приход нового чека)
- получать количество доступных баллов
Корректировка баллов состоит из 2-х шагов
1) Снятие баллов – количество снятых баллов вычисляется по курсу снятия на основе
разницы между суммой позиций чека и суммой чека
2) Начисление баллов – по правилам начисления
При разработке учесть, что для одного клиента в один момент времени может приходить
несколько чеков. (Чеки поступают в сервис не сразу после совершения покупки).
При конвертации из баллов в рубли и обратно использовать обычные правила округления.
Нефункциональные требования – производительность не ниже 1000 чеков в секунду. План
тестирования и отчет приложить. Масштабируемость (возможность запустить несколько нод
сервиса).
Использовать Java, Spring, Gradle.
Написать инструкцию по сборке и запуску сервиса.